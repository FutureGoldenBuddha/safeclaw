services:
  # The MCP Server
  obsidian-mcp:
    build: .
    container_name: obsidian-mcp
    ports:
      - "${MCP_PORT:-3102}:3101" # Exposes the MCP server to the host and other containers
    volumes:
      - "${VAULT_PATH:-./vault}:/vault"
      # Ensure you have a ./hooks folder next to this file containing the 'pre-commit' script
      - "./hooks:/app/hooks"
    restart: unless-stopped

  # The AI Agent
#  openclaw:
#    image: openclaw/openclaw:latest
#    container_name: openclaw
#    depends_on:
#      - obsidian-pilot
#    volumes:
#      - ./openclaw_config:/app/config
#      - "/your/local/path/to/vault:/vault"
#    environment:
#      - MCP_SERVER_URL=http://obsidian-pilot:3000/sse
#    restart: unless-stopped